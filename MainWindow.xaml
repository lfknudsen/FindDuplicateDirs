<Window x:Class="FindDuplicateDirs.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xml:lang="en-GB"
        mc:Ignorable="d"
        Title="DupDirFinder"
        MinWidth="600"
        MinHeight="480"
        Icon="Graphics/Icon.png"
        SizeToContent="WidthAndHeight">
    <Grid>
        <DockPanel LastChildFill="True" ClipToBounds="True">
            <DockPanel DockPanel.Dock="Top" LastChildFill="False">
                <Button DockPanel.Dock="Left" Click="SelectDirs_OnClick"
                        ToolTip="Select directories to traverse."
                        Margin="2 2 2 0" Padding="6 3 6 3">
                    Add directories
                </Button>
                <Button DockPanel.Dock="Left" Click="Clear_OnClick"
                        ToolTip="Clear current list of directories."
                        Margin="2 2 2 0" Padding="6 3 6 3">
                    Clear list
                </Button>
                <Button DockPanel.Dock="Left" Click="SetInitialDir_OnClick"
                        ToolTip="Set the initial directory when clicking 'Add directories'."
                        Margin="2 2 2 0" Padding="6 3 6 3">
                    Set initial directory
                </Button>
                <Button MinWidth="38px" DockPanel.Dock="Right" Click="Activate_OnClick"
                        ToolTip="Locate subdirectories which have the same name."
                        Margin="2 2 2 0" Padding="6 3 6 3" Content="Start"
                        x:Name="BtnStart"/>
            </DockPanel>
            <StatusBar DockPanel.Dock="Bottom">
                <DockPanel LastChildFill="True">
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                        <StatusBarItem>Directories: </StatusBarItem>
                        <StatusBarItem
                            Content="{Binding Source={StaticResource DirList}, Path=Count}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <StatusBarItem>Duplicate Pairs: </StatusBarItem>
                        <StatusBarItem
                            Content="{Binding Source={StaticResource DuplicateList}, Path=Count}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <StatusBarItem>
                            <CheckBox Click="ToggleSizeFormatting"/>
                        </StatusBarItem>
                        <StatusBarItem> Show size in bytes</StatusBarItem>
                    </StackPanel>
                </DockPanel>
            </StatusBar>
            <Grid DockPanel.Dock="Left" Margin="2 3 2 0" ClipToBounds="True">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition MinWidth="5"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition MinWidth="5"/>
                </Grid.ColumnDefinitions>
                <ListView Grid.Column="0" HorizontalAlignment="Stretch"
                          ItemsSource="{Binding Source={StaticResource DirList}}">
                    <ListView.Resources>
                        <ContextMenu x:Key="DirectoryContextMenu">
                            <MenuItem Header="Remove from list" Click="DirItem_OnRightClick"/>
                        </ContextMenu>
                    </ListView.Resources>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="{x:Type ListViewItem}">
                            <Setter Property="ContextMenu"
                                    Value="{StaticResource DirectoryContextMenu}"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ListView.View>
                        <GridView
                            ColumnHeaderToolTip="The top-level directories wherein the programme
                        will look for child directories with identical names.">
                            <GridViewColumn DisplayMemberBinding="{Binding Path=FullName}"
                                            Header="Path"/>
                        </GridView>
                    </ListView.View>
                </ListView>
                <GridSplitter Grid.Column="1" Opacity="0"
                              HorizontalAlignment="Stretch" Width="5"
                              Cursor="SizeWE"/>
                <ListView Grid.Column="2" HorizontalAlignment="Stretch"
                          ItemsSource="{Binding Source={StaticResource DuplicateList}}"
                          x:Name="DuplicateListView">
                    <ListView.Resources>
                        <ContextMenu x:Key="DirectoryContextMenu">
                            <MenuItem Header="Remove from list" Click="DupItem_OnRightClick"/>
                            <MenuItem Header="Open directories" Click="OpenInFileExplorer"/>
                        </ContextMenu>
                    </ListView.Resources>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="{x:Type ListViewItem}">
                            <Setter Property="ContextMenu"
                                    Value="{StaticResource DirectoryContextMenu}"/>
                        </Style>
                    </ListView.ItemContainerStyle>
                    <ListView.View>
                        <GridView
                            ColumnHeaderToolTip="Identically-named sub-directory pairs.">
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item1}"
                                            Header="Path 1"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item1.DirSize}"
                                            Header="Size 1"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item1.LastModified}"
                                            Header="Last Modified 1"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item1.Created}"
                                            Header="Created 1"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item2}"
                                            Header="Path 2"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item2.DirSize}"
                                            Header="Size 2"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item2.LastModified}"
                                            Header="Last Modified 2"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Item2.Created}"
                                            Header="Created 2"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </DockPanel>
    </Grid>
</Window>